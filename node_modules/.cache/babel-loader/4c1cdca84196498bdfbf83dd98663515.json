{"ast":null,"code":"import _toConsumableArray from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{fetchAllActivities}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MyRoutinesActivitiesForm=function MyRoutinesActivitiesForm(_ref){var pendingActivities=_ref.pendingActivities,setPendingActivities=_ref.setPendingActivities,routineActivities=_ref.routineActivities,errorMessage=_ref.errorMessage,setErrorMessage=_ref.setErrorMessage,id=_ref.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),activityList=_useState2[0],setActivityList=_useState2[1];var _useState3=useState({routineId:id,activityId:null,count:0,duration:0,name:''}),_useState4=_slicedToArray(_useState3,2),selectedActivity=_useState4[0],setSelectedActivity=_useState4[1];var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetchAllActivities();case 3:results=_context.sent;setActivityList(results);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);throw _context.t0;case 10:;case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);var handleSelectChange=function handleSelectChange(event){setErrorMessage(null);var selectedName=event.target.value;var selectedIndex=event.target.options.selectedIndex;var activityId=Number(event.target.options[selectedIndex].getAttribute('data-key'));pendingActivities.forEach(function(activity){if(activityId===activity.activityId){setErrorMessage('You already queued up this activity!');return;}});routineActivities.forEach(function(activity){if(activityId===activity.activityId){setErrorMessage('This activity is already part of your routine!');return;}});setSelectedActivity(_objectSpread(_objectSpread({},selectedActivity),{},{activityId:activityId,name:selectedName}));};var handleNumberChange=function handleNumberChange(event){setErrorMessage(null);setSelectedActivity(_objectSpread(_objectSpread({},selectedActivity),{},_defineProperty({},event.target.name,Number(event.target.value))));};var pushToStateArray=function pushToStateArray(selectedActivity){var newArray=_toConsumableArray(pendingActivities);newArray.push(selectedActivity);return newArray;};var handleAddActivity=function handleAddActivity(event){event.preventDefault();setErrorMessage('');if(!selectedActivity.name){setErrorMessage('Please choose an activity to add to your routine!');return;}if(selectedActivity.count<1||selectedActivity.duration<1){setErrorMessage('Please set activity count and duration!');return;}var newObject=pushToStateArray(selectedActivity);setPendingActivities(newObject);};var handleDelete=function handleDelete(activityId){for(var i=0;i<activityList.length;i++){if(pendingActivities[i].activityId===activityId){pendingActivities.splice(i,1);setPendingActivities(_toConsumableArray(pendingActivities));return;}}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"select\",{name:\"activities-list\",onChange:handleSelectChange,children:[/*#__PURE__*/_jsx(\"option\",{}),activityList?activityList.map(function(_ref3){var id=_ref3.id,name=_ref3.name;return/*#__PURE__*/_jsx(\"option\",{\"data-key\":id,value:name,children:name},id);}):null]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Count: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",name:\"count\",value:selectedActivity.count,onChange:handleNumberChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Duration (minutes): \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",name:\"duration\",value:selectedActivity.duration,onChange:handleNumberChange})]}),/*#__PURE__*/_jsx(\"button\",{disabled:errorMessage?true:false,onClick:handleAddActivity,children:\"Add activity\"}),/*#__PURE__*/_jsx(\"ul\",{children:pendingActivities.length>0?pendingActivities.map(function(_ref4){var name=_ref4.name,count=_ref4.count,duration=_ref4.duration,activityId=_ref4.activityId;return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",onClick:function onClick(){return handleDelete(activityId);},children:\"delete\"}),\" \",name,\" (\",count,\" \",count>1?'reps':'rep',\" for \",duration,\" \",duration>1?'mins':'min',\")\"]},activityId);}):null})]});};export default MyRoutinesActivitiesForm;","map":{"version":3,"sources":["/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/src/components/MyRoutinesActivitiesForm.jsx"],"names":["React","useState","useEffect","fetchAllActivities","MyRoutinesActivitiesForm","pendingActivities","setPendingActivities","routineActivities","errorMessage","setErrorMessage","id","activityList","setActivityList","routineId","activityId","count","duration","name","selectedActivity","setSelectedActivity","fetchData","results","handleSelectChange","event","selectedName","target","value","selectedIndex","options","Number","getAttribute","forEach","activity","handleNumberChange","pushToStateArray","newArray","push","handleAddActivity","preventDefault","newObject","handleDelete","i","length","splice","map"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\n\nimport {fetchAllActivities} from '../api';\n\nconst MyRoutinesActivitiesForm = ({pendingActivities, setPendingActivities, routineActivities, errorMessage, setErrorMessage, id}) => {\n    const [activityList, setActivityList] = useState([]);\n\n    const [selectedActivity, setSelectedActivity] = useState({\n        routineId: id,\n        activityId: null,\n        count: 0,\n        duration: 0,\n        name: ''\n    });\n\n    const fetchData = async () => {\n        try {\n            const results = await fetchAllActivities();\n            setActivityList(results);\n        } catch (error) {\n            throw error;\n        };\n    }\n\n    useEffect(() => {\n        fetchData();\n    }, [])\n\n    const handleSelectChange = (event) => {\n        setErrorMessage(null)\n        const selectedName = event.target.value;\n        const selectedIndex = event.target.options.selectedIndex;\n        const activityId = Number(event.target.options[selectedIndex].getAttribute('data-key'));\n        pendingActivities.forEach((activity) => {\n            if (activityId === activity.activityId) {\n                setErrorMessage('You already queued up this activity!');\n                return;    \n            }\n        })\n        routineActivities.forEach((activity) => {\n            if (activityId === activity.activityId) {\n                setErrorMessage('This activity is already part of your routine!');\n                return;    \n            }\n        })\n        setSelectedActivity({...selectedActivity, activityId: activityId, name: selectedName});\n    }\n\n    const handleNumberChange = (event) => {\n        setErrorMessage(null)\n        setSelectedActivity({...selectedActivity, [event.target.name]: Number(event.target.value)});\n    }\n\n    const pushToStateArray = (selectedActivity) => {\n        const newArray = [...pendingActivities];\n        newArray.push(selectedActivity);\n        return newArray;\n    }\n\n    const handleAddActivity = (event) => {\n        event.preventDefault();\n        setErrorMessage('');\n        if (!selectedActivity.name) {\n            setErrorMessage('Please choose an activity to add to your routine!');\n            return;\n        }\n        if (selectedActivity.count < 1 || selectedActivity.duration < 1) {\n            setErrorMessage('Please set activity count and duration!');\n            return;\n        }\n        const newObject = pushToStateArray(selectedActivity);\n        setPendingActivities(newObject);\n    }\n\n    const handleDelete = (activityId) => {\n        for (let i = 0; i < activityList.length; i++) {\n            if (pendingActivities[i].activityId === activityId) {\n                pendingActivities.splice(i, 1);\n                setPendingActivities([...pendingActivities])\n                return;\n            }\n        }\n    }\n\n    return (\n        <>\n            <select name='activities-list' onChange={handleSelectChange}>\n                <option />\n                {activityList ? activityList.map(({id, name}) => {\n                    return <option key={id} data-key={id} value={name}>{name}</option>\n                }) : null}\n            </select>\n            <label>\n                <span>Count: </span>\n                <input type='number' min='0' name='count' value={selectedActivity.count} onChange={handleNumberChange} />\n            </label>\n            <label>\n                <span>Duration (minutes): </span>\n                <input type='number' min='0' name='duration' value={selectedActivity.duration} onChange={handleNumberChange} />\n            </label>\n            <button disabled={errorMessage ? true : false} onClick={handleAddActivity}>Add activity</button>\n            <ul>\n                {pendingActivities.length > 0 ? pendingActivities.map(({name, count, duration, activityId}) => {\n                    return (\n                        <li key={activityId}>\n                            <span className='material-icons' onClick={() => handleDelete(activityId)}>delete</span> {name} ({count} {count > 1 ? 'reps' : 'rep'} for {duration} {duration > 1 ? 'mins' : 'min'})\n                        </li>\n                    )\n                }) : null}\n            </ul>\n        </>\n    )\n}\n\nexport default MyRoutinesActivitiesForm;"]},"metadata":{},"sourceType":"module"}