{"ast":null,"code":"import _defineProperty from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{createActivity,fetchAllActivities}from'../api';import{checkToken}from'../auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Activities=function Activities(_ref){var currentUser=_ref.currentUser;var _useState=useState({name:'',description:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),activityList=_useState6[0],setActivityList=_useState6[1];var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetchAllActivities();case 3:results=_context.sent;setActivityList(results);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);throw _context.t0;case 10:;case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);var handleFormChange=function handleFormChange(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value)));};function checkActivityList(name){var activityListLowercase=activityList.map(function(activity){var activityName=activity.name.toLowerCase();return activityName;});var nameLowercase=name.toLowerCase();return activityListLowercase.includes(nameLowercase);}var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var name,description;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();setErrorMessage('');name=form.name,description=form.description;if(!(!name||!description)){_context2.next=6;break;}setErrorMessage('Both name and description are required!');return _context2.abrupt(\"return\");case 6:if(checkToken()){_context2.next=9;break;}setErrorMessage('You are not logged in!');return _context2.abrupt(\"return\");case 9:;if(!checkActivityList(name)){_context2.next=13;break;}setErrorMessage('Activity already exists!');return _context2.abrupt(\"return\");case 13:_context2.prev=13;_context2.next=16;return createActivity(name,description);case 16:setForm({name:'',description:''});fetchData();_context2.next=24;break;case 20:_context2.prev=20;_context2.t0=_context2[\"catch\"](13);setErrorMessage(_context2.t0.message);console.error(_context2.t0);case 24:case\"end\":return _context2.stop();}}},_callee2,null,[[13,20]]);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[currentUser.loggedIn?/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New Activity\"}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Activity name: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:form.name,onChange:handleFormChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Activity description: \"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:form.description,onChange:handleFormChange})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Create activity\",onClick:handleSubmit})]}):null,/*#__PURE__*/_jsxs(\"div\",{id:\"activities\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"All Activities:\"}),activityList.length>0&&activityList.map(function(_ref4){var name=_ref4.name,description=_ref4.description,id=_ref4.id;return/*#__PURE__*/_jsxs(\"div\",{className:\"activity\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Activity: \",/*#__PURE__*/_jsx(\"span\",{className:\"activity-name\",children:name})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",description]})]},id);})]})]});};export default Activities;","map":{"version":3,"sources":["/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/src/components/Activities.jsx"],"names":["React","useState","useEffect","createActivity","fetchAllActivities","checkToken","Activities","currentUser","name","description","form","setForm","errorMessage","setErrorMessage","activityList","setActivityList","fetchData","results","handleFormChange","event","target","value","checkActivityList","activityListLowercase","map","activity","activityName","toLowerCase","nameLowercase","includes","handleSubmit","preventDefault","message","console","error","loggedIn","length","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport {createActivity, fetchAllActivities} from '../api';\n\nimport {checkToken} from '../auth';\n\nconst Activities = ({currentUser}) => {\n    const [form, setForm] = useState({\n        name: '',\n        description: ''\n    })\n\n    const [errorMessage, setErrorMessage] = useState(null);\n\n    const [activityList, setActivityList] = useState([]);\n\n    const fetchData = async () => {\n        try {\n            const results = await fetchAllActivities();\n            setActivityList(results);\n        } catch (error) {\n            throw error;\n        };\n    }\n\n    useEffect(() => {\n        fetchData();\n    }, [])\n\n    const handleFormChange = (event) => {\n        setForm({...form, [event.target.name]: event.target.value});\n    }\n\n    function checkActivityList(name) {\n        const activityListLowercase = activityList.map((activity) => {\n            const activityName = activity.name.toLowerCase();\n            return activityName;\n        });\n        const nameLowercase = name.toLowerCase();\n        return activityListLowercase.includes(nameLowercase);\n    }\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        setErrorMessage('');\n        const {name, description} = form;\n        if (!name || !description) {\n            setErrorMessage('Both name and description are required!');\n            return;\n        }\n        if (!checkToken()) {\n            setErrorMessage('You are not logged in!');\n            return;\n        };\n        if (checkActivityList(name)) {\n            setErrorMessage('Activity already exists!');\n            return;\n        }\n        try {\n            await createActivity(name, description);\n            setForm({name: '', description: ''})\n            fetchData();\n        } catch (error) {\n            setErrorMessage(error.message)\n            console.error(error);\n        }\n    }\n\n    return (\n        <>\n            {currentUser.loggedIn ? (\n            <form>\n                <h2>Create New Activity</h2>\n                <label>\n                    <span>Activity name: </span>\n                    <input type='text' name='name' value={form.name} onChange={handleFormChange} />\n                </label>\n                <label>\n                    <span>Activity description: </span>\n                    <textarea name='description' value={form.description} onChange={handleFormChange} />\n                </label>\n                {errorMessage && (\n                    <p className='error-message'>{errorMessage}</p>\n                )}\n                <input type='submit' value='Create activity' onClick={handleSubmit} />\n            </form>\n            ) : null\n            }\n            <div id='activities'>\n                <h2>All Activities:</h2>\n                {activityList.length > 0 && activityList.map(({name, description, id}) => {\n                    return <div key={id} className='activity'>\n                        <h3>Activity: <span className='activity-name'>{name}</span></h3>\n                        <p>Description: {description}</p>\n                    </div>\n                })}\n            </div>\n        </>\n    );\n}\n\nexport default Activities;"]},"metadata":{},"sourceType":"module"}