{"ast":null,"code":"import _defineProperty from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{fetchAllActivities}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MyRoutinesActivitiesForm=function MyRoutinesActivitiesForm(_ref){var pendingActivities=_ref.pendingActivities,setPendingActivities=_ref.setPendingActivities,errorMessage=_ref.errorMessage,setErrorMessage=_ref.setErrorMessage,id=_ref.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),activityList=_useState2[0],setActivityList=_useState2[1];var _useState3=useState({routineId:id,activityId:1,count:1,duration:1}),_useState4=_slicedToArray(_useState3,2),selectedActivity=_useState4[0],setSelectedActivity=_useState4[1];var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetchAllActivities();case 3:results=_context.sent;setActivityList(results);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);throw _context.t0;case 10:;case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);var handleSelectChange=function handleSelectChange(event){var selectedIndex=event.target.options.selectedIndex;var activityId=Number(event.target.options[selectedIndex].getAttribute('data-key'));setSelectedActivity(_objectSpread(_objectSpread({},selectedActivity),{},{activityId:activityId}));};var handleNumberChange=function handleNumberChange(event){setSelectedActivity(_objectSpread(_objectSpread({},selectedActivity),{},_defineProperty({},event.target.name,Number(event.target.value))));};var getActivityName=function getActivityName(){var _activityList$filter=activityList.filter(function(activity){return selectedActivity.activityId===activity.id;}),_activityList$filter2=_slicedToArray(_activityList$filter,1),activity=_activityList$filter2[0];return activity.name;};var pushToStateArray=function pushToStateArray(newName,newData){var newNamesArray=pendingActivities.names.slice();var newDataArray=pendingActivities.data.slice();newNamesArray.push(newName);newDataArray.push(newData);return _objectSpread(_objectSpread({},pendingActivities),{},{names:newNamesArray,data:newDataArray});};var handleAddActivity=function handleAddActivity(event){event.preventDefault();var newObject=pushToStateArray(getActivityName(),selectedActivity);setPendingActivities(newObject);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"select\",{name:\"activities\",onChange:handleSelectChange,children:activityList?activityList.map(function(_ref3){var id=_ref3.id,name=_ref3.name;return/*#__PURE__*/_jsx(\"option\",{\"data-key\":id,value:name,children:name},id);}):null}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Count: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"count\",value:selectedActivity.count,onChange:handleNumberChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Duration (minutes): \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"duration\",value:selectedActivity.duration,onChange:handleNumberChange})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddActivity,children:\"Add activity\"}),/*#__PURE__*/_jsx(\"ul\",{children:pendingActivities.names?pendingActivities.names.map(function(name,index){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",children:\"delete\"}),\" \",name]},index);}):null})]});};export default MyRoutinesActivitiesForm;","map":{"version":3,"sources":["/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/src/components/MyRoutinesActivitiesForm.jsx"],"names":["React","useState","useEffect","fetchAllActivities","MyRoutinesActivitiesForm","pendingActivities","setPendingActivities","errorMessage","setErrorMessage","id","activityList","setActivityList","routineId","activityId","count","duration","selectedActivity","setSelectedActivity","fetchData","results","handleSelectChange","event","selectedIndex","target","options","Number","getAttribute","handleNumberChange","name","value","getActivityName","filter","activity","pushToStateArray","newName","newData","newNamesArray","names","slice","newDataArray","data","push","handleAddActivity","preventDefault","newObject","map","index"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\n\nimport {fetchAllActivities} from '../api';\n\nconst MyRoutinesActivitiesForm = ({pendingActivities, setPendingActivities, errorMessage, setErrorMessage, id}) => {\n    const [activityList, setActivityList] = useState([]);\n\n    const [selectedActivity, setSelectedActivity] = useState({\n        routineId: id,\n        activityId: 1,\n        count: 1,\n        duration: 1,\n    });\n\n    const fetchData = async () => {\n        try {\n            const results = await fetchAllActivities();\n            setActivityList(results);\n        } catch (error) {\n            throw error;\n        };\n    }\n\n    useEffect(() => {\n        fetchData();\n    }, [])\n\n    const handleSelectChange = (event) => {\n        const selectedIndex = event.target.options.selectedIndex;\n        const activityId = Number(event.target.options[selectedIndex].getAttribute('data-key'));\n        setSelectedActivity({...selectedActivity, activityId: activityId});\n    }\n\n    const handleNumberChange = (event) => {\n        setSelectedActivity({...selectedActivity, [event.target.name]: Number(event.target.value)});\n    }\n\n    const getActivityName = () => {\n        const [activity] = activityList.filter(activity => selectedActivity.activityId === activity.id);\n        return activity.name;\n    }\n\n    const pushToStateArray = (newName, newData) => {\n        const newNamesArray = pendingActivities.names.slice();\n        const newDataArray = pendingActivities.data.slice();\n        newNamesArray.push(newName);\n        newDataArray.push(newData);\n        return {...pendingActivities, names: newNamesArray, data: newDataArray};\n    }\n\n    const handleAddActivity = (event) => {\n        event.preventDefault();\n        const newObject = pushToStateArray(getActivityName(), selectedActivity);\n        setPendingActivities(newObject);\n    }\n\n    return (\n        <>\n            <select name='activities' onChange={handleSelectChange}>\n                {activityList ? activityList.map(({id, name}) => {\n                    return <option key={id} data-key={id} value={name}>{name}</option>\n                }) : null}\n            </select>\n            {errorMessage && (\n                <p className='error-message'>{errorMessage}</p>\n            )}\n            <label>\n                <span>Count: </span>\n                <input type='number' name='count' value={selectedActivity.count} onChange={handleNumberChange} />\n            </label>\n            <label>\n                <span>Duration (minutes): </span>\n                <input type='number' name='duration' value={selectedActivity.duration} onChange={handleNumberChange} />\n            </label>\n            <button onClick={handleAddActivity}>Add activity</button>\n            <ul>\n                {pendingActivities.names ? pendingActivities.names.map((name, index) => {\n                    return (\n                        <li key={index}>\n                            <span className='material-icons'>delete</span> {name}\n                        </li>\n                    )\n                }) : null}\n            </ul>\n        </>\n    )\n}\n\nexport default MyRoutinesActivitiesForm;"]},"metadata":{},"sourceType":"module"}