{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Link}from'react-router-dom';import{registerUser}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Register=function Register(_ref){var setCurrentUser=_ref.setCurrentUser;var _useState=useState({username:'',password:'',passwordCheck:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var handleFormChange=function handleFormChange(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value.trim())));};var checkPassword=function checkPassword(password,passwordCheck){var conditions=['$','!','@','#'];if(password.length<8)return false;if(password!==passwordCheck)return false;for(var i=0;i<conditions.length;i++){for(var j=0;j<password.length;j++){if(conditions[i]===password[j]){return true;};};};return false;};var checkFields=function checkFields(){var username=form.username,password=form.password,passwordCheck=form.passwordCheck;return username.length<6?false:!checkPassword(password,passwordCheck)?false:true;};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var username,password,name,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setErrorMessage(null);username=form.username,password=form.password;_context.prev=3;if(checkFields()){_context.next=9;break;}setErrorMessage('Something\\'s not right! Please check and try again.');return _context.abrupt(\"return\");case 9:_context.next=11;return registerUser(username,password);case 11:setCurrentUser({username:username,loggedIn:true});case 12:;_context.next=21;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](3);name=_context.t0.name;message=_context.t0.message;setErrorMessage(message);console.error(name,message);case 21:case\"end\":return _context.stop();}}},_callee,null,[[3,15]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create an account\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"username: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:form.username,name:\"username\",onChange:handleFormChange}),/*#__PURE__*/_jsx(\"span\",{className:\"note\",children:\"Create a username at least 6 characters long.\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",onChange:handleFormChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"retype password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"passwordCheck\",onChange:handleFormChange}),/*#__PURE__*/_jsx(\"span\",{className:\"note\",children:\"Create a password at least 8 characters long and include at least 1 of the following special characters: ( $ ! @ # ).\"})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\",onClick:handleSubmit})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account? Click \",/*#__PURE__*/_jsx(Link,{to:\"/account/login\",children:\"here\"}),\" to log in.\"]})]});};export default Register;","map":{"version":3,"sources":["/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/src/components/Register.jsx"],"names":["React","useState","Link","registerUser","Register","setCurrentUser","username","password","passwordCheck","form","setForm","errorMessage","setErrorMessage","handleFormChange","event","target","name","value","trim","checkPassword","conditions","length","i","j","checkFields","handleSubmit","preventDefault","loggedIn","message","console","error"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {Link} from 'react-router-dom';\nimport {registerUser} from '../api';\n\nconst Register = ({setCurrentUser}) => {\n    const [form, setForm] = useState({\n        username: '',\n        password: '',\n        passwordCheck: ''\n    })\n\n    const [errorMessage, setErrorMessage] = useState();\n\n    const handleFormChange = (event) => {\n        setForm({...form, [event.target.name]: event.target.value.trim()});\n    }\n\n    const checkPassword = (password, passwordCheck) => {\n        const conditions = ['$', '!', '@', '#'];\n        if (password.length < 8) return false;\n        if (password !== passwordCheck) return false;\n        for (let i = 0; i < conditions.length; i++) {\n            for (let j = 0; j < password.length; j++) {\n                if (conditions[i] === password[j]) {\n                    return true;\n                };\n            };\n        };\n        return false;\n    }\n\n    const checkFields = () => {\n        const {username, password, passwordCheck} = form;\n        return username.length < 6 ? false\n        : !checkPassword(password, passwordCheck) ? false\n        : true;\n    }\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        setErrorMessage(null);\n        const {username, password} = form;\n        try {\n            if (!checkFields()) {\n                setErrorMessage('Something\\'s not right! Please check and try again.');\n                return;\n            } else {\n                await registerUser(username, password);\n                setCurrentUser({username: username, loggedIn: true});\n            };            \n        } catch ({name, message}) {\n            setErrorMessage(message);\n            console.error(name, message);\n        }\n    }\n\n    return (\n        <>\n            <h2>Create an account</h2>\n            <form>\n                <label>\n                    <span>username: </span>\n                    <input type='text' value={form.username} name='username' onChange={handleFormChange} />\n                    <span className='note'>Create a username at least 6 characters long.</span>\n                </label>\n                <label>\n                    <span>password: </span>\n                    <input type='password' name='password' onChange={handleFormChange} />\n                </label>\n                <label>\n                    <span>retype password: </span>\n                    <input type='password' name='passwordCheck' onChange={handleFormChange} />\n                    <span className='note'>Create a password at least 8 characters long and include at least 1 of the following special characters: ( $ ! @ # ).</span>\n                </label>\n                {errorMessage && (\n                    <p className='error-message'>{errorMessage}</p>\n                )}\n                <input type='submit' value='Submit' onClick={handleSubmit} />\n            </form>\n            <p>Already have an account? Click <Link to='/account/login'>here</Link> to log in.</p>\n        </>\n    );\n}\n\nexport default Register;"]},"metadata":{},"sourceType":"module"}