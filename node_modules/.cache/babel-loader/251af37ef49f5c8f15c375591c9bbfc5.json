{"ast":null,"code":"import _defineProperty from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{fetchAllActivities,addActivityToRoutine}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MyRoutinesActivitiesForm=function MyRoutinesActivitiesForm(_ref){var errorMessage=_ref.errorMessage,setErrorMessage=_ref.setErrorMessage,id=_ref.id;var _useState=useState({name:'',goal:'',isPublic:false}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),activityList=_useState4[0],setActivityList=_useState4[1];var _useState5=useState({routineId:id,activityId:1,count:1,duration:1}),_useState6=_slicedToArray(_useState5,2),selectedActivity=_useState6[0],setSelectedActivity=_useState6[1];var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetchAllActivities();case 3:results=_context.sent;setActivityList(results);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);throw _context.t0;case 10:;case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);var handleSelectChange=function handleSelectChange(event){var selectedIndex=event.target.options.selectedIndex;var activityId=Number(event.target.options[selectedIndex].getAttribute('data-key'));setSelectedActivity(_objectSpread(_objectSpread({},selectedActivity),{},{activityId:activityId}));};var handleNumberChange=function handleNumberChange(event){setSelectedActivity(_objectSpread(_objectSpread({},selectedActivity),{},_defineProperty({},event.target.name,Number(event.target.value))));};var handleAddActivity=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var routineId,activityId,count,duration;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();routineId=selectedActivity.routineId,activityId=selectedActivity.activityId,count=selectedActivity.count,duration=selectedActivity.duration;_context2.prev=2;_context2.next=5;return addActivityToRoutine(routineId,activityId,count,duration);case 5:_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[2,7]]);}));return function handleAddActivity(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"select\",{name:\"activities\",onChange:handleSelectChange,children:activityList?activityList.map(function(_ref4){var id=_ref4.id,name=_ref4.name;return/*#__PURE__*/_jsx(\"option\",{\"data-key\":id,value:name,children:name},id);}):null}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Count: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"count\",value:selectedActivity.count,onChange:handleNumberChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Duration (minutes): \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"duration\",value:selectedActivity.duration,onChange:handleNumberChange})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddActivity,children:\"Add to routine\"})]});};export default MyRoutinesActivitiesForm;","map":{"version":3,"sources":["/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/src/components/MyRoutinesActivitiesForm.jsx"],"names":["React","useState","useEffect","fetchAllActivities","addActivityToRoutine","MyRoutinesActivitiesForm","errorMessage","setErrorMessage","id","name","goal","isPublic","form","setForm","activityList","setActivityList","routineId","activityId","count","duration","selectedActivity","setSelectedActivity","fetchData","results","handleSelectChange","event","selectedIndex","target","options","Number","getAttribute","handleNumberChange","value","handleAddActivity","preventDefault","console","log","map"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\n\nimport {fetchAllActivities, addActivityToRoutine} from '../api';\n\nconst MyRoutinesActivitiesForm = ({errorMessage, setErrorMessage, id}) => {\n    const [form, setForm] = useState({\n        name: '',\n        goal: '',\n        isPublic: false\n    })\n\n    const [activityList, setActivityList] = useState([]);\n\n    const [selectedActivity, setSelectedActivity] = useState({\n        routineId: id,\n        activityId: 1,\n        count: 1,\n        duration: 1,\n    });\n\n    const fetchData = async () => {\n        try {\n            const results = await fetchAllActivities();\n            setActivityList(results);\n        } catch (error) {\n            throw error;\n        };\n    }\n\n    useEffect(() => {\n        fetchData();\n    }, [])\n\n    const handleSelectChange = (event) => {\n        const selectedIndex = event.target.options.selectedIndex;\n        const activityId = Number(event.target.options[selectedIndex].getAttribute('data-key'));\n        setSelectedActivity({...selectedActivity, activityId: activityId});\n    }\n\n    const handleNumberChange = (event) => {\n        setSelectedActivity({...selectedActivity, [event.target.name]: Number(event.target.value)});\n    }\n\n    const handleAddActivity = async (event) => {\n        event.preventDefault();\n        const {routineId, activityId, count, duration} = selectedActivity;\n        try {\n            await addActivityToRoutine(routineId, activityId, count, duration);\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    return (\n        <>\n            <select name='activities' onChange={handleSelectChange}>\n                {activityList ? activityList.map(({id, name}) => {\n                    return <option key={id} data-key={id} value={name}>{name}</option>\n                }) : null}\n            </select>\n            {errorMessage && (\n                <p className='error-message'>{errorMessage}</p>\n            )}\n            <label>\n                <span>Count: </span>\n                <input type='number' name='count' value={selectedActivity.count} onChange={handleNumberChange} />\n            </label>\n            <label>\n                <span>Duration (minutes): </span>\n                <input type='number' name='duration' value={selectedActivity.duration} onChange={handleNumberChange} />\n            </label>\n            <button onClick={handleAddActivity}>Add to routine</button>\n        </>\n    )\n}\n\nexport default MyRoutinesActivitiesForm;"]},"metadata":{},"sourceType":"module"}