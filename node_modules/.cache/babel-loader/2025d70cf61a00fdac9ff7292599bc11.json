{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Link}from'react-router-dom';import{loginUser}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(_ref){var setUser=_ref.setUser;var _useState=useState({username:'',password:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var handleFormChange=function handleFormChange(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value.trim())));};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var username,password,name,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setErrorMessage(null);username=form.username,password=form.password;if(!(!username||!password)){_context.next=6;break;}setErrorMessage('Something\\'s not right! Please check and try again.');return _context.abrupt(\"return\");case 6:;_context.prev=7;_context.next=10;return loginUser(username,password);case 10:setUser({username:username,loggedIn:true});_context.next=19;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](7);name=_context.t0.name;message=_context.t0.message;setErrorMessage(message);console.error(name,message);case 19:;case 20:case\"end\":return _context.stop();}}},_callee,null,[[7,13]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"username: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:form.username,name:\"username\",onChange:handleFormChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",onChange:handleFormChange})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Log in\",onClick:handleSubmit})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Need an account? Click \",/*#__PURE__*/_jsx(Link,{to:\"/account/register\",children:\"here\"}),\" to register.\"]})]});};export default Login;","map":{"version":3,"sources":["/Users/anthonybeesley/Documents/Anthony/Coding Bootcamp/course_work/project_17/src/components/Login.jsx"],"names":["React","useState","Link","loginUser","Login","setUser","username","password","form","setForm","errorMessage","setErrorMessage","handleFormChange","event","target","name","value","trim","handleSubmit","preventDefault","loggedIn","message","console","error"],"mappings":"u9BAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,OAAQC,SAAR,KAAwB,QAAxB,C,6IAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAe,IAAbC,CAAAA,OAAa,MAAbA,OAAa,CACzB,cAAwBJ,QAAQ,CAAC,CAC7BK,QAAQ,CAAE,EADmB,CAE7BC,QAAQ,CAAE,EAFmB,CAAD,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eAKA,eAAwCR,QAAQ,CAAC,IAAD,CAAhD,yCAAOS,YAAP,eAAqBC,eAArB,eAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,KAAD,CAAW,CAChCJ,OAAO,gCAAKD,IAAL,wBAAYK,KAAK,CAACC,MAAN,CAAaC,IAAzB,CAAgCF,KAAK,CAACC,MAAN,CAAaE,KAAb,CAAmBC,IAAnB,EAAhC,GAAP,CACH,CAFD,CAIA,GAAMC,CAAAA,YAAY,2FAAG,iBAAOL,KAAP,qJACjBA,KAAK,CAACM,cAAN,GACAR,eAAe,CAAC,IAAD,CAAf,CACOL,QAHU,CAGYE,IAHZ,CAGVF,QAHU,CAGAC,QAHA,CAGYC,IAHZ,CAGAD,QAHA,MAKb,CAACD,QAAD,EAAa,CAACC,QALD,0BAMbI,eAAe,CAAC,qDAAD,CAAf,CANa,wCAQhB,CARgB,uCAWPR,CAAAA,SAAS,CAACG,QAAD,CAAWC,QAAX,CAXF,SAYbF,OAAO,CAAC,CAACC,QAAQ,CAAEA,QAAX,CAAqBc,QAAQ,CAAE,IAA/B,CAAD,CAAP,CAZa,iFAaPL,IAbO,aAaPA,IAbO,CAaDM,OAbC,aAaDA,OAbC,CAcbV,eAAe,CAACU,OAAD,CAAf,CACAC,OAAO,CAACC,KAAR,CAAcR,IAAd,CAAoBM,OAApB,EAfa,QAgBhB,CAhBgB,qEAAH,kBAAZH,CAAAA,YAAY,6CAAlB,CAmBA,mBACI,wCACI,6BADJ,cAEI,qCACI,sCACI,oCADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,KAAK,CAAEV,IAAI,CAACF,QAA/B,CAAyC,IAAI,CAAC,UAA9C,CAAyD,QAAQ,CAAEM,gBAAnE,EAFJ,GADJ,cAKI,sCACI,oCADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,UAA5B,CAAuC,QAAQ,CAAEA,gBAAjD,EAFJ,GALJ,CASKF,YAAY,eACT,UAAG,SAAS,CAAC,eAAb,UAA8BA,YAA9B,EAVR,cAYI,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,QAA3B,CAAoC,OAAO,CAAEQ,YAA7C,EAZJ,GAFJ,cAgBI,4DAA0B,KAAC,IAAD,EAAM,EAAE,CAAC,mBAAT,kBAA1B,mBAhBJ,GADJ,CAoBH,CAnDD,CAqDA,cAAed,CAAAA,KAAf","sourcesContent":["import React, {useState} from 'react';\nimport {Link} from 'react-router-dom';\nimport {loginUser} from '../api';\n\nconst Login = ({setUser}) => {\n    const [form, setForm] = useState({\n        username: '',\n        password: ''\n    })\n\n    const [errorMessage, setErrorMessage] = useState(null);\n\n    const handleFormChange = (event) => {\n        setForm({...form, [event.target.name]: event.target.value.trim()});\n    }\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        setErrorMessage(null);\n        const {username, password} = form;\n\n        if (!username || !password) {\n            setErrorMessage('Something\\'s not right! Please check and try again.');\n            return;\n        };\n\n        try {\n            await loginUser(username, password);\n            setUser({username: username, loggedIn: true});\n        } catch ({name, message}) {\n            setErrorMessage(message);\n            console.error(name, message);\n        };\n    }\n\n    return (\n        <>\n            <h3>Login</h3>\n            <form>\n                <label>\n                    <span>username: </span>\n                    <input type='text' value={form.username} name='username' onChange={handleFormChange} />                    \n                </label>\n                <label>\n                    <span>password: </span>\n                    <input type='password' name='password' onChange={handleFormChange} />\n                </label>\n                {errorMessage && (\n                    <p className='error-message'>{errorMessage}</p>\n                )}\n                <input type='submit' value='Log in' onClick={handleSubmit} />\n            </form>\n            <p>Need an account? Click <Link to='/account/register'>here</Link> to register.</p>\n        </>\n    );\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}